{"ast":null,"code":"import React,{useState}from'react';import{Box,List,ListItem,ListItemText,Typography,Divider,Paper,IconButton,Dialog,DialogActions,DialogContent,DialogContentText,DialogTitle,Button,TextField}from'@mui/material';import DeleteIcon from'@mui/icons-material/Delete';import EditIcon from'@mui/icons-material/Edit';import SaveIcon from'@mui/icons-material/Save';import CancelIcon from'@mui/icons-material/Cancel';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const DepartmentList=_ref=>{let{departments,onDelete,onEdit}=_ref;const[open,setOpen]=useState(false);const[selectedDepartment,setSelectedDepartment]=useState(null);const[editingDepartmentId,setEditingDepartmentId]=useState(null);const[editedDepartment,setEditedDepartment]=useState({});const handleEditClick=department=>{setEditingDepartmentId(department._id);setEditedDepartment(department);// Set the department to edit\n};// Handle opening the delete confirmation dialog\nconst handleDeleteClick=department=>{setSelectedDepartment(department);setOpen(true);};// Handle closing the confirmation dialog\nconst handleClose=()=>{setOpen(false);setSelectedDepartment(null);};// Handle confirming the deletion\nconst handleConfirmDelete=()=>{if(selectedDepartment){onDelete(selectedDepartment._id);// Pass department ID to the onDelete function in the parent component\n}handleClose();};// Handle save changes\nconst handleSave=()=>{onEdit(editedDepartment);setEditingDepartmentId(null);};// Handle cancel editing\nconst handleCancel=()=>{setEditingDepartmentId(null);setEditedDepartment({});// Reset the form\n};return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:600,margin:'auto',mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",gutterBottom:true,sx:{fontWeight:'bold'},children:\"Departments and Employees\"}),/*#__PURE__*/_jsx(Box,{sx:{overflowY:'auto',height:'400px'},children:departments.map(dept=>/*#__PURE__*/_jsxs(Paper,{sx:{padding:2,marginBottom:3},children:[/*#__PURE__*/_jsx(List,{children:editingDepartmentId===dept._id?/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"end\",onClick:handleCancel,children:/*#__PURE__*/_jsx(CancelIcon,{})}),/*#__PURE__*/_jsx(IconButton,{edge:\"end\",onClick:handleSave,children:/*#__PURE__*/_jsx(SaveIcon,{})})]}),children:/*#__PURE__*/_jsx(TextField,{type:\"text\",value:editedDepartment.name,onChange:e=>setEditedDepartment({...editedDepartment,name:e.target.value})})},dept._id):/*#__PURE__*/_jsx(ListItem,{secondaryAction:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"edit\",onClick:()=>handleEditClick(dept),children:/*#__PURE__*/_jsx(EditIcon,{})}),/*#__PURE__*/_jsx(IconButton,{edge:\"end\",\"aria-label\":\"delete\",onClick:()=>handleDeleteClick(dept),children:/*#__PURE__*/_jsx(DeleteIcon,{})})]}),children:/*#__PURE__*/_jsx(ListItemText,{primary:dept.name,primaryTypographyProps:{sx:{fontWeight:'bold'}}})},dept._id)}),/*#__PURE__*/_jsx(Divider,{}),dept.employees.length>0?/*#__PURE__*/_jsx(List,{children:dept.employees.map(emp=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{sx:{paddingLeft:2},primary:`${emp.name} ${emp.surname}`})},emp._id))}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mt:2,padding:2},children:\"There are currently no employees in this department.\"})]},dept._id))}),/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Confirm Deletion\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(DialogContentText,{children:[\"Are you sure you want to delete department: \",/*#__PURE__*/_jsx(\"b\",{children:selectedDepartment===null||selectedDepartment===void 0?void 0:selectedDepartment.name}),\"?\"]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,color:\"primary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{onClick:handleConfirmDelete,color:\"secondary\",children:\"Delete\"})]})]})]});};export default DepartmentList;","map":{"version":3,"names":["React","useState","Box","List","ListItem","ListItemText","Typography","Divider","Paper","IconButton","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Button","TextField","DeleteIcon","EditIcon","SaveIcon","CancelIcon","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","DepartmentList","_ref","departments","onDelete","onEdit","open","setOpen","selectedDepartment","setSelectedDepartment","editingDepartmentId","setEditingDepartmentId","editedDepartment","setEditedDepartment","handleEditClick","department","_id","handleDeleteClick","handleClose","handleConfirmDelete","handleSave","handleCancel","sx","maxWidth","margin","mt","children","variant","align","gutterBottom","fontWeight","overflowY","height","map","dept","padding","marginBottom","secondaryAction","edge","onClick","type","value","name","onChange","e","target","primary","primaryTypographyProps","employees","length","emp","paddingLeft","surname","onClose","color"],"sources":["/Users/chieduonwuemene/softwaredevelopment/coursera/projects/apollonia-fullstack/client/src/components/DepartmentList.js"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n  Divider,\n  Paper, IconButton,\n  Dialog, DialogActions, DialogContent, DialogContentText, \n  DialogTitle, Button, TextField\n} from '@mui/material';\n\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport CancelIcon from '@mui/icons-material/Cancel';\n\nconst DepartmentList = ({departments, onDelete, onEdit}) => {\n    const [open, setOpen] = useState(false);\n    const [selectedDepartment, setSelectedDepartment] = useState(null);\n    const [editingDepartmentId, setEditingDepartmentId] = useState(null);\n    const [editedDepartment, setEditedDepartment] = useState({});\n\n   const handleEditClick = (department) => {\n    setEditingDepartmentId(department._id);\n    setEditedDepartment(department);  // Set the department to edit\n   };\n\n  // Handle opening the delete confirmation dialog\n  const handleDeleteClick = (department) => {\n    setSelectedDepartment(department);\n    setOpen(true);\n  };\n\n  // Handle closing the confirmation dialog\n  const handleClose = () => {\n    setOpen(false);\n    setSelectedDepartment(null);\n  };\n\n  // Handle confirming the deletion\n  const handleConfirmDelete = () => {\n    if (selectedDepartment) {\n      onDelete(selectedDepartment._id);  // Pass department ID to the onDelete function in the parent component\n    }\n    handleClose();\n  };\n\n  // Handle save changes\n  const handleSave = () => {\n    onEdit(editedDepartment);\n    setEditingDepartmentId(null);\n  };\n\n  // Handle cancel editing\n  const handleCancel = () => {\n    setEditingDepartmentId(null);\n    setEditedDepartment({});  // Reset the form\n  };\n\n  return (\n    <Box sx={{ maxWidth: 600, margin: 'auto', mt: 4 }}>\n      <Typography variant=\"h5\" align=\"center\" gutterBottom sx={{fontWeight: 'bold'}}>\n        Departments and Employees\n      </Typography>\n      <Box sx={{ overflowY: 'auto', height: '400px' }}>\n      {departments.map((dept) => (\n        <Paper key={dept._id} sx={{ padding: 2, marginBottom: 3 }}>\n          <List>\n            {editingDepartmentId === dept._id ? (\n            \n            <ListItem key={dept._id} secondaryAction={\n                <>\n                    <IconButton edge=\"end\" onClick={handleCancel}>\n                        <CancelIcon />\n                    </IconButton>\n                    <IconButton edge=\"end\" onClick={handleSave}>\n                        <SaveIcon />\n                    </IconButton>\n                </>\n            }>\n              <TextField\n                type=\"text\"\n                value={editedDepartment.name}\n                onChange={(e) => setEditedDepartment({ ...editedDepartment, name: e.target.value })}\n              />    \n             \n            </ListItem>) : (\n                <ListItem key={dept._id} secondaryAction={\n                    <>\n                        <IconButton edge=\"end\" aria-label=\"edit\" onClick={() => handleEditClick(dept)}>\n                            <EditIcon />\n                        </IconButton>\n                        <IconButton edge=\"end\" aria-label=\"delete\" onClick={() => handleDeleteClick(dept)}>\n                            <DeleteIcon />\n                        </IconButton>\n                    </>\n                    }>\n                <ListItemText primary={dept.name} \n                            primaryTypographyProps={{ sx: {fontWeight: 'bold'}}}/>\n                </ListItem>)\n            }\n          </List>\n          <Divider />\n          {dept.employees.length > 0 ? (\n          <List>\n            {dept.employees.map((emp) => (\n              <ListItem key={emp._id}>\n                <ListItemText sx={{paddingLeft: 2}}\n                  primary={`${emp.name} ${emp.surname}`}\n                />\n              </ListItem>\n            ))}\n          </List> ) : (\n            <Typography variant=\"body2\" sx={{ mt: 2, padding: 2}}>\n              There are currently no employees in this department.\n            </Typography>\n          )}\n        </Paper>\n      ))}\n    </Box>\n    <Dialog\n        open={open}\n        onClose={handleClose}\n      >\n        <DialogTitle>Confirm Deletion</DialogTitle>\n        <DialogContent>\n          <DialogContentText>\n            Are you sure you want to delete department: <b>{selectedDepartment?.name}</b>?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleConfirmDelete} color=\"secondary\">\n            Delete\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n};\n\nexport default DepartmentList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}